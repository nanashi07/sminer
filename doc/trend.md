# 趨勢計算預測

## 點至直線最短距離

> 假設直線不為垂直線（無斜率或斜率無限大）

定義直線 $ Ax + By + C = 0 $, 點為 $ (x_0, y_0) $

求單點至直線距離（面積法）

![面積法](image01.png)

定義直線上兩點 $ R(x_r, y_0), S(x_0, y_s) $，其中可知

$$ Ax_r + By_0 + C = 0 $$

與

$$ Ax_r + By_0 + C = 0 $$

即

$$ x_r = \frac{ -By_0 - C }{ A } $$

與

$$ y_s = \frac{ -Ax_0 - C }{ B } $$

由此可得水平距離為

$$ | PR | = | y_0 - \frac{ -Ax_0 - C }{ B } | = | \frac{ Ax_0 + By_0 + C }{ B } | $$

垂直距離為

$$ | PS | = | x_0 - \frac{ -By_0 - C }{ A } | = | \frac{ Ax_0 + By_0 + C }{ A } | $$

三角形長邊為

$$ | RS | = \sqrt{ |PR|^2 + |PS|^2 } = \frac{ \sqrt{ A^2 + B^2 } }{ AB } \cdot | Ax_0 + By_0 + C | $$

由三角形面積公式可得三角形斜邊高（即點至直線距離） $d$ 為

$$ d \cdot | RS | = | PR | \cdot | PS | $$

即

$$ d = \frac{ | PR | \cdot | PS | }{ | RS | } = \frac{ | Ax_0 + By_0 + C | }{ \sqrt{ A^2 + B^2 } } $$

## 平面上有限個點到直線的最短距離

> 簡單線性模型

給定直線

$$ y = Ax + B $$

與平面座標點資料

| num | $x_i$ | $y_i$ | $x_i - \overline{x}$ | $y_i - \overline{y} $ | ($x_i - \overline{x})\cdot(y_i - \overline{y}) $ | $(x_i - \overline{x})^2$ | $(y_i - \overline{y})^2$ |
|-----|------|-------|-------|-------|----------|----------|----------|
| 1   | 208  | 21.6  | 40.2  | 3.19  | 128.238  | 1616.04  | 10.1761  |
| 2   | 152  | 15.5  | -15.8 | -2.91 | 45.978   | 249.64   | 8.4681   |
| 3   | 113  | 10.4  | -54.8 | -8.01 | 438.948  | 3003.04  | 64.1601  |
| 4   | 227  | 31.0  | 59.2  | 12.59 | 745.328  | 3504.64  | 158.5081 |
| 5   | 137  | 13.0  | -30.8 | -5.41 | 166.628  | 948.64   | 29.2681  |
| 6   | 238  | 32.4  | 70.2  | 13.99 | 982.098  | 4928.04  | 195.7201 |
| 7   | 178  | 19.0  | 10.2  | 0.59  | 6.018    | 104.04   | 0.3481   |
| 8   | 104  | 10.4  | -63.8 | -8.01 | 511.038  | 4070.44  | 64.1601  |
| 9   | 191  | 19.0  | 23.2  | 0.59  | 13.688   | 538.24   | 0.3481   |
| 10  | 130  | 11.8  | -37.8 | -6.61 | 249.858  | 1428.84  | 43.6921  |
| sum | 1678 | 184.1 | 0.0   | 0.00  | 3287.820 | 20391.60 | 574.8490 |

由表可得

$$ A = \frac{ \sum_{ i = 1 }^{ n }(x_i - \overline{x})(y_i - \overline{y}) }{ \sum_{ i = 1 }^{ n }(x_i - \overline{x})^2 } = \frac{ 3287.820 }{ 20391.60 } = 0.1612340375448714176425587006414405932 $$

$$ B = \overline{y} - A\overline{x} = 18.41 - 0.1612 \cdot 167.8 = -8.645071500029423880421349967633731539 $$

即所求線性模型為

$$ y = 0.1612340375448714176425587006414405932x - 8.645071500029423880421349967633731539 $$


> * [最小平方法](https://zh.wikipedia.org/wiki/%E6%9C%80%E5%B0%8F%E4%BA%8C%E4%B9%98%E6%B3%95)
> * [MathJax basic tutorial and quick reference](https://math.meta.stackexchange.com/questi =ons/5020/mathjax-basic-tutorial-and-quick-reference)